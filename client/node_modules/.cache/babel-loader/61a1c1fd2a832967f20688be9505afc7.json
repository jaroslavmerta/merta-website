{"ast":null,"code":"import _slicedToArray from\"C:\\\\merta-website\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import React,{useState}from\"react\";import axios from\"axios\";import{Navigate,useNavigate,Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoginPage=function LoginPage(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loggedIn=_useState2[0],setloggedIn=_useState2[1];var navigate=useNavigate();var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),emailState=_useState4[0],setEmailState=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),passState=_useState6[0],setPassState=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];var handleSubmit=function handleSubmit(e){e.preventDefault();console.log(\"handle submit\");if(passState===\"\"||emailState===\"\"){alert(\"Must Fill All Fields!\");}//console.log(emailState, passState);\naxios.get(\"http://localhost:5000/api/getUser\",{params:{email:emailState,password:passState}}).then(function(response){response=response.data;var data=response.data;console.log(\"___\",response);if(data.length===0){setError(response.message);console.log(error);}else{localStorage.setItem(\"is-login\",true);var islogin=localStorage.getItem(\"is-login\");setloggedIn(islogin);if(islogin){console.log(islogin+\"__+++_\");window.location.href=\"/writer\";}else{navigate(\"/login\");}}}).catch(function(error){console.log(error);}).then(function(){// always executed\n});};function handleChange(event){if(event.target.name===\"email\"){setEmailState(event.target.value);}else if(event.target.name===\"password\"){setPassState(event.target.value);}else{setEmailState(\"\");setPassState(\"\");}}return/*#__PURE__*/_jsxs(\"div\",{className:\"offset-4 col-sm-6 mt-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"pull-left\",children:error}),\"\\xA0\",/*#__PURE__*/_jsx(Link,{className:\"pull-right\",to:\"/register\",children:\"Nem\\xE1\\u0161 je\\u0161t\\u011B \\xFA\\u010Det? Registruj se!\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"E-mail\"}),/*#__PURE__*/_jsx(\"input\",{required:true,type:\"email\",className:\"form-control\",placeholder:\"E-mail\",name:\"email\",value:emailState,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Heslo\"}),/*#__PURE__*/_jsx(\"input\",{required:true,type:\"password\",className:\"form-control\",placeholder:\"Heslo\",name:\"password\",value:passState,onChange:handleChange})]}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",className:\"btn btn-success mt-2\",value:\"P\\u0159ihl\\xE1sit se\"})]})]});};export default LoginPage;","map":{"version":3,"sources":["C:/merta-website/client/src/auth/Login.js"],"names":["React","useState","axios","Navigate","useNavigate","Link","LoginPage","props","loggedIn","setloggedIn","navigate","emailState","setEmailState","passState","setPassState","error","setError","handleSubmit","e","preventDefault","console","log","alert","get","params","email","password","then","response","data","length","message","localStorage","setItem","islogin","getItem","window","location","href","catch","handleChange","event","target","name","value"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Navigate, useNavigate, Link } from \"react-router-dom\";\r\n\r\nconst LoginPage = (props) => {\r\n  const [loggedIn, setloggedIn] = useState(false);\r\n  const navigate = useNavigate();\r\n  const [emailState, setEmailState] = useState(\"\");\r\n  const [passState, setPassState] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    console.log(\"handle submit\");\r\n    if (passState === \"\" || emailState === \"\") {\r\n      alert(\"Must Fill All Fields!\");\r\n    }\r\n    //console.log(emailState, passState);\r\n    axios\r\n      .get(\"http://localhost:5000/api/getUser\", {\r\n        params: {\r\n          email: emailState,\r\n          password: passState,\r\n        },\r\n      })\r\n      .then(function (response) {\r\n        response = response.data;\r\n        var data = response.data;\r\n        console.log(\"___\", response);\r\n        if (data.length === 0) {\r\n          setError(response.message);\r\n          console.log(error);\r\n        } else {\r\n          localStorage.setItem(\"is-login\", true);\r\n          const islogin = localStorage.getItem(\"is-login\");\r\n          setloggedIn(islogin);\r\n          if (islogin) {\r\n            console.log(islogin + \"__+++_\");\r\n            window.location.href = \"/writer\";\r\n          } else {\r\n            navigate(\"/login\");\r\n            \r\n          }\r\n        }\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      })\r\n      .then(function () {\r\n        // always executed\r\n      });\r\n  };\r\n\r\n  function handleChange(event) {\r\n    if (event.target.name === \"email\") {\r\n      setEmailState(event.target.value);\r\n    } else if (event.target.name === \"password\") {\r\n      setPassState(event.target.value);\r\n    } else {\r\n      setEmailState(\"\");\r\n      setPassState(\"\");\r\n    }\r\n  }\r\n  return (\r\n    <div className=\"offset-4 col-sm-6 mt-5\">\r\n        <div className=\"alert alert-info\">\r\n            <span className=\"pull-left\">{error}</span>\r\n            &nbsp;\r\n            <Link className=\"pull-right\" to=\"/register\">\r\n            Nemáš ještě účet? Registruj se!\r\n            </Link>\r\n        </div>\r\n        <form onSubmit={handleSubmit}>\r\n            <div className=\"form-group\">\r\n            <label htmlFor=\"email\">E-mail</label>\r\n            <input\r\n                required={true}\r\n                type=\"email\"\r\n                className=\"form-control\"\r\n                placeholder=\"E-mail\"\r\n                name=\"email\"\r\n                value={emailState}\r\n                onChange={handleChange}\r\n            />\r\n            </div>\r\n            <div className=\"form-group\">\r\n            <label htmlFor=\"password\">Heslo</label>\r\n            <input\r\n                required={true}\r\n                type=\"password\"\r\n                className=\"form-control\"\r\n                placeholder=\"Heslo\"\r\n                name=\"password\"\r\n                value={passState}\r\n                onChange={handleChange}\r\n            />\r\n            </div>\r\n            <input type=\"submit\" className=\"btn btn-success mt-2\" value=\"Přihlásit se\" />\r\n        </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginPage;"]},"metadata":{},"sourceType":"module"}