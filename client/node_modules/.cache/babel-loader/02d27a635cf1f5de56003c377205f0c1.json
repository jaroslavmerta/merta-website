{"ast":null,"code":"import _asyncToGenerator from\"C:\\\\Users\\\\logme\\\\Dropbox\\\\Projekty_kody\\\\node.js\\\\react-apps\\\\merta-site\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"C:\\\\Users\\\\logme\\\\Dropbox\\\\Projekty_kody\\\\node.js\\\\react-apps\\\\merta-site\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\logme\\\\Dropbox\\\\Projekty_kody\\\\node.js\\\\react-apps\\\\merta-site\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useEffect}from'react';import{ApiGet,ApiPost,ApiPut}from'../../common/Api';import DateStringFormatter from'../../common/DateStringFormatter';import FlashMessage from'../../common/FlashMessage';import InputField from'../../common/InputField';import InputCheck from'../../common/InputCheck';import{useNavigate,useParams}from\"react-router\";import BlogHeader from'../BlogHeader';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ArticleForm=function ArticleForm(props){var navigate=useNavigate();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),articleIdState=_useState2[0],setArticleId=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),articleNameState=_useState4[0],setArticleName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),biographyState=_useState6[0],setBiography=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),articleRoleState=_useState8[0],setArticleRole=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),sentState=_useState10[0],setSent=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),successState=_useState12[0],setSuccess=_useState12[1];var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),errorState=_useState14[0],setError=_useState14[1];//params in props.match.params.id byly undefined, tenhle statement to vyřešil \nvar _useParams=useParams(),id=_useParams.id;useEffect(function(){if(id){setArticleId(id);ApiGet(\"/api/article/\"+id).then(function(data){setArticleName(data.name);setBiography(data.biography);});}},[id]);var handleSubmit=function handleSubmit(e){e.preventDefault();var body={name:articleNameState,biography:biographyState};(articleIdState?ApiPut('/api/article/'+id,body):ApiPost('/api/article/',body)).then(function(data){setSent(true);setSuccess(true);navigate(\"/writer\");}).catch(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(error){var er;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return error;case 2:er=_context.sent;console.log('here',er.message);setError(er.message);setSent(true);setSuccess(false);case 7:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());};var sent=sentState;var success=successState;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(BlogHeader,{}),/*#__PURE__*/_jsxs(\"h1\",{children:[id?'Upravit':'Vytvořit',\" \\u010Dl\\xE1nek\"]}),/*#__PURE__*/_jsx(\"hr\",{}),errorState?/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:errorState}):'',sent&&/*#__PURE__*/_jsx(FlashMessage,{theme:success?'success':'',text:success?'Uložení čláku proběhlo úspěšně.':''}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(InputField,{required:true,type:\"text\",name:\"articleName\",min:\"3\",label:\"N\\xE1zev \\u010Dl\\xE1nku\",prompt:\"Nap\\u0159. Teorie sv\\u011Bta\",value:articleNameState,handleChange:function handleChange(e){var value=e.target.value;setArticleName(value);//console.log(articleNameState);\n}}),/*#__PURE__*/_jsx(InputField,{required:true,type:\"textarea\",name:\"biography\",minLength:\"10\",label:\"Text \\u010Dl\\xE1nku\",prompt:\"Napi\\u0161te text \\u010Dl\\xE1nku\",rows:\"5\",value:biographyState,handleChange:function handleChange(e){var value=e.target.value;setBiography(value);//console.log(biographyState);\n}}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",className:\"btn btn-primary\",value:\"Ulo\\u017Eit\"})]})]});};export default ArticleForm;","map":{"version":3,"sources":["C:/Users/logme/Dropbox/Projekty_kody/node.js/react-apps/merta-site/src/Blog/articles/ArticleForm.js"],"names":["React","useState","useEffect","ApiGet","ApiPost","ApiPut","DateStringFormatter","FlashMessage","InputField","InputCheck","useNavigate","useParams","BlogHeader","ArticleForm","props","navigate","articleIdState","setArticleId","articleNameState","setArticleName","biographyState","setBiography","articleRoleState","setArticleRole","sentState","setSent","successState","setSuccess","errorState","setError","id","then","data","name","biography","handleSubmit","e","preventDefault","body","catch","error","er","console","log","message","sent","success","value","target"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { ApiGet, ApiPost, ApiPut } from '../../common/Api';\r\nimport DateStringFormatter from '../../common/DateStringFormatter';\r\nimport FlashMessage from '../../common/FlashMessage';\r\nimport InputField from '../../common/InputField';\r\nimport InputCheck from '../../common/InputCheck';\r\nimport { useNavigate, useParams } from \"react-router\";\r\nimport BlogHeader from '../BlogHeader';\r\n\r\nconst ArticleForm = (props) => {\r\n    const navigate = useNavigate();\r\n    const [articleIdState, setArticleId] = useState(null);\r\n    const [articleNameState, setArticleName] = useState('');\r\n    const [biographyState, setBiography] = useState('');\r\n    const [articleRoleState, setArticleRole] = useState('');\r\n    const [sentState, setSent] = useState(false);\r\n    const [successState, setSuccess] = useState(false);\r\n    const [errorState, setError] = useState(null);\r\n\r\n    //params in props.match.params.id byly undefined, tenhle statement to vyřešil \r\n    const { id } = useParams();\r\n        \r\n        useEffect(() => {\r\n            if (id) {\r\n            setArticleId(id);\r\n        \r\n            ApiGet(\"/api/article/\" + id).then((data) => {\r\n                setArticleName(data.name);\r\n                setBiography(data.biography);\r\n                \r\n            });\r\n            }\r\n        }, [id ]);\r\n    \r\n    \r\n\r\n      const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n\r\n        const body = {\r\n            name: articleNameState,\r\n            biography: biographyState,\r\n        \r\n        };\r\n\r\n        (articleIdState\r\n            ? ApiPut('/api/article/' + id, body)\r\n            : ApiPost('/api/article/', body)\r\n        )\r\n            .then((data) => {\r\n                setSent(true);\r\n                setSuccess(true);\r\n                navigate(\"/writer\");\r\n            })\r\n            .catch( async (error) => {\r\n                const er = await error\r\n                console.log('here', er.message)\r\n                setError(er.message)\r\n                setSent(true);\r\n                setSuccess(false);\r\n            });\r\n\r\n    }\r\n    \r\n    const sent = sentState;\r\n    const success = successState;\r\n    \r\n    \r\n        return (\r\n            \r\n            <div>\r\n                <BlogHeader/>\r\n                <h1>{ id ? 'Upravit' : 'Vytvořit'} článek</h1>\r\n                <hr />\r\n                {errorState? <div className='alert alert-danger'>{errorState}</div> : ''}\r\n                {sent && (\r\n                    <FlashMessage\r\n                        theme={success ? 'success' : ''}\r\n                        text={\r\n                            success\r\n                                ? 'Uložení čláku proběhlo úspěšně.'\r\n                                : ''\r\n                        }\r\n                    />\r\n                )}\r\n    \r\n                <form onSubmit={handleSubmit}>\r\n                    <InputField\r\n                        required={true}\r\n                        type=\"text\"\r\n                        name=\"articleName\"\r\n                        min=\"3\"\r\n                        label=\"Název článku\"\r\n                        prompt=\"Např. Teorie světa\"\r\n                        value={articleNameState}\r\n                        handleChange={(e) => {\r\n                        const { value } = e.target;\r\n                        setArticleName(value);\r\n                        //console.log(articleNameState);\r\n                        }}\r\n                    />\r\n\r\n                    <InputField\r\n                        required={true}\r\n                        type=\"textarea\"\r\n                        name=\"biography\"\r\n                        minLength=\"10\"\r\n                        label=\"Text článku\"\r\n                        prompt=\"Napište text článku\"\r\n                        rows=\"5\"\r\n                        value={biographyState}\r\n                        handleChange={(e) => {\r\n                        const { value } = e.target;\r\n                        setBiography(value);\r\n                        //console.log(biographyState);\r\n                        }}\r\n                    />\r\n\r\n                    <input type=\"submit\" className=\"btn btn-primary\" value=\"Uložit\" />\r\n                </form>\r\n            </div>\r\n        );\r\n}\r\n\r\nexport default ArticleForm;"]},"metadata":{},"sourceType":"module"}